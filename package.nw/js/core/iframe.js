"use strict";!function(){const e=()=>{const e=document.getElementById("webview"),n=window.ua||navigator.userAgent,t=n.indexOf(" wechatideplugin ")>0;e.setUserAgentOverride(n);const o=window.location.search.indexOf("uncontrolledwindow=1")>-1;function d(e){e.addEventListener("newwindow",i),e.addEventListener("permissionrequest",n=>{"download"===n.permission&&(n.request.allow(),setTimeout(()=>{document.body.removeChild(e)},3e3))}),t&&e.addEventListener("dialog",e=>{e.preventDefault();const n=e.messageType||"",t=e.messageText;if("prompt"!==n||"GET_MESSAGE_TOKEN"!==t)e.dialog.ok();else{require('../js/unpack/hackrequire/index.js');const n=require('../core.wxvpkg/d15bfd6a2234129f5ea1f808e801b055.js');e.dialog.ok(n.getToken("PLUGIN"))}})}function i(e){if(o){const n=document.createElement("webview");document.body.appendChild(n),e.window.attach(n),d(n)}else window.open(e.targetUrl)}d(e),window.postMessage("popup-ready","*")};"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)}();