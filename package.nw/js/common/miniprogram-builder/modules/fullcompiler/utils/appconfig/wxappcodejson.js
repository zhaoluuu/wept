!function(require, directRequire){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),tools_1=require("../../../../utils/tools"),pagejson_1=tslib_1.__importDefault(require("./pagejson")),_=require("lodash"),appConfigHelper=require("./appconfig");async function getWXAppCodeJSON(e,n,o){const i=await appConfigHelper.getAppConfig(e,n,!1),s=(0,tools_1.checkIsInSubPackage)(i,o),t=await(0,pagejson_1.default)(e,n,o);if(t.usingComponents&&Object.keys(t.usingComponents).length>0){const e={};for(const n in t.usingComponents){const o=t.usingComponents[n]||"";i.plugins||(null==s?void 0:s.plugins)?e[n]=o.replace(/^plugin:\/\/([^/]*)\/(.*)/,(e,n,o,t,p)=>{var l,u;const r=(null===(l=i.plugins)||void 0===l?void 0:l[n])||(null===(u=null==s?void 0:s.plugins)||void 0===u?void 0:u[n]);return r?`plugin://${r.provider}/${o}`:p}):e[n]=o}t.usingComponents=e}return _.cloneDeep(t)}exports.default=getWXAppCodeJSON;
}(require("licia/lazyImport")(require), require)