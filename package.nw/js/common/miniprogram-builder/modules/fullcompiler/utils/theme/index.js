!function(require, directRequire){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkVariables=exports.getDefaultWindowConfig=exports.checkThemeRules=exports.checkTabbarListItemIconPath=void 0;const tslib_1=require("tslib"),locales_1=tslib_1.__importDefault(require("../../../../utils/locales/locales")),tools_1=require("../../../../utils/tools"),config_1=require("../../../../config/config"),path=require("path"),fs=require("fs"),TABBAR_ICON_WHITE_LIST=[".png",".jpg",".jpeg"];function checkTabbarListItemIconPath(e,o){const t=config_1.DefaultProjectAttr,{setting:r}=t,a=[];if(!fs.existsSync(o))return a.push(locales_1.default.config.NOT_FOUND.format(e)),a;const i=fs.statSync(o);if(i.isDirectory())return a.push(locales_1.default.config.JSON_CONTENT_SHOULD_NOT_BE.format(e,locales_1.default.config.DIRECTORY)),a;i.size>1024*r.MaxTabbarIconSize&&a.push(locales_1.default.config.EXCEED_LIMIT.format(e,r.MaxTabbarIconSize+"kb"));const l=path.extname(o);return TABBAR_ICON_WHITE_LIST.indexOf(l)<0&&a.push(locales_1.default.config.FILE_EXT_FORMAT_ERROR.format(e,TABBAR_ICON_WHITE_LIST.join("、"))),a}function throwError(e={msg:"",filePath:"app.json"}){const{msg:o,filePath:t}=e,r=new Error(o);throw r.code=config_1.JSON_CONTENT_ERR,r.path=t,r}function checkThemeRules(e){const o=(o,t)=>{const r=checkTabbarListItemIconPath(o,path.join(e,t));r.length>0&&throwError({msg:r.join("\n"),filePath:"app.json or ext.json"})};return{windowConfigRules:[{key:"navigationBarTextStyle",valids:["black","white"]},{key:"backgroundTextStyle",valids:["dark","light"]},{key:"navigationBarBackgroundColor",hexColor:!0},{key:"backgroundColor",hexColor:!0},{key:"backgroundColorTop",hexColor:!0},{key:"backgroundColorBottom",hexColor:!0}],tabbarRules:[{key:"selectedColor",hexColor:!0},{key:"color",hexColor:!0},{key:"backgroundColor",hexColor:!0},{key:"borderStyle",valids:["black","white"]}],tabbarListItemRules:[{key:"iconPath",validate:o},{key:"selectedIconPath",validate:o}]}}function getDefaultWindowConfig(e){return e?{backgroundColor:"#232323",backgroundTextStyle:"light"}:{backgroundColor:"#ffffff",backgroundTextStyle:"dark"}}function checkVariables(e){var o;const{windowConfig:t,themeLocation:r,filePath:a,isDarkMode:i,themeJSON:l,rules:c,keyPrefix:n,isPlugin:s=!1}=e,f=i?l.dark||{}:l.light||{},h=i?"dark":"light";for(const e of c)if((t[e.key]||"").startsWith("@")){const i=(null===(o=t[e.key])||void 0===o?void 0:o.slice(1))||"";if(i&&void 0===r){if(s)continue;throwError({msg:locales_1.default.config.THEME_JSON_SHOULD_EXIST.format(`${n}["${e.key}"]`,`"@${i}"`,'appJSON["themeLocation"]'),filePath:a})}const l=f[i];if(void 0===l){if(s)continue;throwError({msg:locales_1.default.config.JSON_VARIABLE_VALUE_NOT_FOUND.format(`${n}["${e.key}"]: "@${i}"`,`${r}["${h}"]`),filePath:a})}void 0!==l&&(Array.isArray(e.valids)&&e.valids.indexOf(l)<0&&throwError({msg:locales_1.default.config.THEME_JSON_VALUE_SHOULD_BE.format(`${r}["${h}"]["${i}"]`,`${a} ${n}["${e.key}"]`,""+JSON.stringify(e.valids)),filePath:r}),e.hexColor&&!(0,tools_1.isHexColor)(l)&&throwError({msg:locales_1.default.config.THEME_JSON_VALUE_SHOULD_BE.format(`${r}["${h}"]["${i}"]`,`${a} ${n}["${e.key}"]`,"hexColor"),filePath:r}),e.validate&&e.validate(`${n}["${e.key}"]`,l),t[e.key]=l)}}exports.checkTabbarListItemIconPath=checkTabbarListItemIconPath,exports.checkThemeRules=checkThemeRules,exports.getDefaultWindowConfig=getDefaultWindowConfig,exports.checkVariables=checkVariables;
}(require("licia/lazyImport")(require), require)