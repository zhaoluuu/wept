!function(require, directRequire){
"use strict";const tslib_1=require("tslib"),transformsourcemap_1=require("../utils/transformsourcemap"),generatecode_utils_1=tslib_1.__importDefault(require("./generatecode.utils")),getcompiledjs_1=require("./getcompiledjs"),{inlineSourceMap:inlineSourceMap,wrapSourceCodeInDefine:wrapSourceCodeInDefine,wrapGameSourceCodeInDefine:wrapGameSourceCodeInDefine}=generatecode_utils_1.default;let largeFilesTimeout,largeFiles=[];function pushLargeFiles(e){largeFiles.push(e),largeFilesTimeout&&clearTimeout(largeFilesTimeout),largeFilesTimeout=setTimeout(()=>{largeFilesTimeout=void 0,largeFiles=[]},1e3)}let ignoreFilesTimeout,ignoreFiles=[];function notifyIgnoreFiles(e){ignoreFiles.push(e),ignoreFilesTimeout&&clearTimeout(ignoreFilesTimeout),ignoreFilesTimeout=setTimeout(()=>{ignoreFiles=[]},1e3)}function getBabelHelpersInjectCode(e,i){return i.injectHelpers&&(null==e?void 0:e.length)?`loadBabelMod(${JSON.stringify(e)}${i.injectHelpersSync?", {sync: true}":""});`:""}async function getJsFile(e,i,r,o={injectHelpers:!0}){r=decodeURI(r);let s,n="";s=await(0,getcompiledjs_1.compileMiniProgramJS)(e,i,r),s.isBabelIgnore&&!o.noWarnings&&notifyIgnoreFiles(r),s.isLargeFile&&!o.noWarnings&&pushLargeFiles(r);const t=s.customTranslated?Object.keys(s.helpers):[],l=o.isGame?wrapGameSourceCodeInDefine:wrapSourceCodeInDefine,a=getBabelHelpersInjectCode(t,o);return s.code=l(r,s.code,a),o.formatResult&&(s=o.formatResult(s)),n=s.customTranslated?o.sourceURL?inlineSourceMap(s.code,"",o.sourceURL):inlineSourceMap(s.code,""):s.map?o.sourceURL?inlineSourceMap(s.code,JSON.stringify(Object.assign(Object.assign({},s.map),{sources:(0,transformsourcemap_1.transformSourceMapSources)(s.map.sources)})),o.sourceURL):inlineSourceMap(s.code,JSON.stringify(s.map)):s.code,{code:n,helpers:t}}module.exports=getJsFile;
}(require("licia/lazyImport")(require), require)