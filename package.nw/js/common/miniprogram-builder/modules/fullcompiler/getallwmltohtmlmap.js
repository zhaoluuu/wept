!function(require, directRequire){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),appconfig_1=tslib_1.__importDefault(require("./utils/appconfig/appconfig")),handleerror_1=require("./utils/handleerror/handleerror"),tools_1=require("./utils/tools"),FUNC_NAME="$gwx";async function default_1(e,t){try{return{success:!0,content:await getallwxmltohtmlmapcore(e,t)}}catch(n){return{success:!1,errMsg:await(0,handleerror_1.handleError)(e,t,n),content:new Map}}}async function getallwxmltohtmlmapcore(e,t){const n=new Map,r=await t.getAllWxmlAndWxsFiles(),a=await appconfig_1.default.getAppConfig(e,t,!0);return r.wxmlFiles.forEach(e=>{const t=e.slice(0,e.length-5),r=getPageInitResource(t,(0,tools_1.checkIsInSubPackage)(a,t));n.set(t+".html",r)}),n}function getPageInitResource(e,t){let n="$gwx";t&&(n="$"+Buffer.from(t.root).toString("hex"));return`\n  <style> </style> <page></page>\n  <script>\n  var __setCssStartTime__ = Date.now();\n  __wxAppCode__['${e}.wxss']();\n  var __setCssEndTime__ = Date.now();\n  (function() {\n    var gf = ${n}( './${e}.wxml' ); \n\n    if (window.__wxAppCodeReadyCallback__) {\n      window.__wxAppCodeReadyCallback__(gf);\n    } else {\n      document.dispatchEvent(new CustomEvent( "generateFuncReady", {\n        detail: {\n          generateFunc: gf\n        }\n      }));\n    }\n  })();\n  <\/script>`}exports.default=default_1;
}(require("licia/lazyImport")(require), require)