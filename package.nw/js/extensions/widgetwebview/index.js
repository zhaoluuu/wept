!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=291)}({291:function(e,t,n){const o=n(292),a=n(294);o.registerCallback(e=>{let{command:t,data:n}=e;"SET_CANVAS"===t?a.setCanvas(n):"DRAW_CANVAS"==t&&a.drawCanvas(n)})},292:function(e,t,n){const o=n(293);navigator.userAgent;function a(){o.connect("WIDGET"),document.getElementById("myCanvas").addEventListener("click",(function(e){console.error(e),o.send({command:"ON_CANVAS_TAP",data:{x:e.pageX,y:e.pageY}})}))}"complete"==document.readyState?a():window.addEventListener("load",()=>{a()}),e.exports={send:o.send,registerCallback:o.registerCallback}},293:function(e,t){var n=window.navigator||window.__global.navigator,o=window.WebSocket||window.__global.WebSocket,a=window.prompt||window.__global.prompt,r=n.userAgent.match(/port\/(\d*)/),l=r?parseInt(r[1]):void 0,i=null,s="ws://127.0.0.1:"+l,c=null,d=[],f=[],u=0;function p(e){i&&i.readyState===o.OPEN?i.send(JSON.stringify(e)):f.push(e)}e.exports={connect:function e(t){if(!l)throw new Error("message port undefined");if(!(u++>=10)){c=t||c;var n=a("GET_MESSAGE_TOKEN");(i=new o(s,`${c}#${n}#`)).onopen=function(e){let t=[].concat(f);f=[],t.forEach(e=>{p(e)})},i.onclose=function(n){i=null,setTimeout(()=>{u<100&&(u++,e(t))},1e3)},i.onmessage=function(e){try{!function(e){d.forEach(t=>{try{t.call(this,e)}catch(e){console.error(e)}})}(JSON.parse(e.data))}catch(e){}}}},send:p,registerCallback:e=>{d.push(e)},getWs:()=>i}},294:function(e,t){const n=e=>{var t=e.slice(0);return t[3]=t[3]/255,`rgba(${t.join(",")})`};let o={};e.exports={drawCanvas:function(e){let t=e.args,{actions:a,reserve:r}=t;!function(e,t=!1){if(!e)return;const a=document.getElementById("myCanvas"),r=a.getContext("2d");!1===t&&(r.fillStyle="#000000",r.strokeStyle="#000000",r.shadowColor="#000000",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,a.width,a.height)),e.forEach((function(e){var t=e.method,a=e.data;if(/^set/.test(t)){var l=t[3].toLowerCase()+t.slice(4),i=void 0;if("fillStyle"===l||"strokeStyle"===l){if("normal"===a[0])i=n(a[1]);else if("linear"===a[0]){i=r.createLinearGradient.apply(r,a[1]);a[2].forEach((function(e){var t=e[0],o=n(e[1]);i.addColorStop(t,o)}))}else if("radial"===a[0]){var s=a[1][0],c=a[1][1],d=[s,c,0,s,c,a[1][2]];i=r.createRadialGradient.apply(r,d);a[2].forEach((function(e){var t=e[0],o=n(e[1]);i.addColorStop(t,o)}))}r[l]=i}else if("globalAlpha"===l)r[l]=a[0]/255;else if("shadow"===l){var f=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];a.forEach((function(e,t){r[f[t]]="shadowColor"===f[t]?n(e):e}))}else"fontSize"===l?r.font=r.font.replace(/\d+\.?\d*px/,a[0]+"px"):"textBaseline"===l?("normal"===a[0]&&(a[0]="alphabetic"),r[l]=a[0]):r[l]=a[0]}else if("fillPath"===t||"strokePath"===t)t=t.replace(/Path/,""),r.beginPath(),a.forEach((function(e){r[e.method].apply(r,e.data)})),r[t]();else if("fillText"===t)r.fillText.apply(r,a);else if("drawImage"===t){let[e,...t]=a;o=o||{},e=e.replace("wxfile://","http://wxfile.open.weixin.qq.com/"),e=0==e.indexOf("/")||0==e.indexOf("\\")?"."+e:e,o[e]?o[e].ready?r.drawImage.apply(r,[o[e],...t]):o[e].queue.push(t):(o[e]=new Image,o[e].src=e,o[e].queue=[],o[e].onload=()=>{o[e].ready=!0,r.drawImage.apply(r,[o[e],...t]),o[e].queue.forEach(t=>{r.drawImage.apply(r,[o[e],...t])}),o[e].queue=[]})}else r[t].apply(r,a)}))}(a,r)},setCanvas:function(e){let t=document.getElementById("myCanvas");e.width&&t.setAttribute("width",e.width),e.height&&t.setAttribute("height",e.height),e.style&&t.setAttribute("style",e.style)}}}});