import{ls}from"../common/common.js";import{Issue,IssueCategory,IssueDescription,IssueKind}from"./Issue.js";export class HeavyAdIssue extends Issue{constructor(e){super(Protocol.Audits.InspectorIssueCode.HeavyAdIssue),this._issueDetails=e}heavyAds(){return[this._issueDetails]}primaryKey(){return`${Protocol.Audits.InspectorIssueCode.HeavyAdIssue}-${JSON.stringify(this._issueDetails)}`}getDescription(){return{title:ls`An ad on your site has exceeded resource limits`,message:mkHeavyAdDescription,issueKind:IssueKind.BreakingChange,links:[{link:"https://developers.google.com/web/updates/2020/05/heavy-ad-interventions",linkTitle:ls`Handling Heavy Ad Interventions`}]}}getCategory(){return IssueCategory.HeavyAd}}function mkHeavyAdDescription(){const e=document.createElement("div");e.classList.add("message");const t=document.createElement("p");t.textContent=ls`
  Chrome identifies heavy ads on your site that use too many resources without a user gesture. Heavy ads have an impact on performance and harm the userâ€™s browsing experience. They increase battery drain, consume mobile data, and make your site slow. To improve the user experience, Chrome warns about or removes heavy ads.`,e.append(t);const s=ls`An ad is considered heavy if the user has not interacted with it (for example, has not tapped or clicked it) and it meets any of the following criteria:`,n=[ls`Uses the main thread for more than 60 seconds in total (CPU total limit)`,ls`Uses the main thread for more than 15 seconds in any 30 second window (CPU peak limit)`,ls`Uses more than 4 megabytes of network bandwidth (Network limit)`],o=document.createElement("p");o.appendChild(document.createTextNode(s));const a=document.createElement("ul");for(const e of n){const t=document.createElement("li");t.classList.add("plain-enum"),t.textContent=e,a.append(t)}o.appendChild(a),e.append(o);const i=document.createElement("p");return i.textContent=ls`Stop this from happening by only showing ads that stay within resource limits.`,e.append(i),e}